#include SAMP.ahk
~Enter::
if(CommandProcessor.StatusProcessor) {
	if(IsChatActive()) {
		if(isDialogOpen())
			return
		
		blockChatInput()
		while(IsChatActive())
			continue
		
		unBlockChatInput()
		
		TextChat := GetChatText()
		
		if(SubStr(TextChat, 1, 1) = "/") { ; Определено что введена команда
			InputCMD := StrSplit(TextChat, A_Space)
			InputCMD := InputCMD[1]
			CommandProcessor.TempCmd := InputCMD
			CommandProcessor.TempText := TextChat
			
			if(CommandProcessor.CommandArray.HasKey(InputCMD)) { ; Если команда определена в скрипте
				ClearTextDialog()
				SetTimer, % CommandProcessor.CommandArray[InputCMD], -1
			} else { ; Если команда не определена
				SendChat(TextChat)
				ClearTextDialog()
			}
		} else { ; Определено что вводиться обычный текст
			if(TextChat != "") {
				CommandProcessor.TempText := TextChat
				SendChat(TextChat)
				ClearTextDialog()
			}
		}
	}
}
return
CommandProcessor := new CommandProcessor() 
CommandProcessor.SetStatusProcessor(true) 
CommandProcessor.RegisterCommand("/увал", "metka") 
metka:
chatInput:=CommandProcessor.TempText
	if (RegExMatch(chatInput,"/увал")){
		RegExMatch(chatInput,"/увал (.*) (.*)",out)
		color := getPlayerColor(id)
		if (color=="4284901119"){
			nick := getPlayerNameById(out1)
			SendChat("/n Игрок " nick " был уволен. Причина: ' " out2 " '")
		}else{
			addChatMessageEx("{FFFFFF}", "{FFFFFF}Вы не можите уволить сотурдника не состоящиго в '{FF6666}Министерстве Здравоохранение{FF6600}'")
		}
	}
	else if (RegExMatch(chatInput,"^/инв")){
		
	}
return 
